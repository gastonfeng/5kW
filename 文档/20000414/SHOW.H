	.TEXT
;初始化子程序
SHOWINT:LDP	#0
	SPLK	#0E2H,SHOWCOM	;复位
	CALL	PR0
	CALL	PR3
	LDP	#0
	SPLK	#0A4H,SHOWCOM	;关闭等待状态
	CALL	PR0
	CALL	PR3
	LDP	#0
	SPLK	#0A9H,SHOWCOM	;设置1/32占空比
	CALL	PR0
	CALL	PR3
	LDP	#0
	SPLK	#0A0H,SHOWCOM	;正向排序设置
	CALL	PR0
	CALL	PR3
	LDP	#0
	SPLK	#0C0H,SHOWCOM	;设置显示起始行为第一行
	CALL	PR0
	CALL	PR3
	LDP	#0
	SPLK	#0AFH,SHOWCOM	;开显示设置
	CALL	PR0
	CALL	PR3
	RET


;如何进行和液晶之间的双向通讯
;A0---IOPB5
;R/W---IOPB3
;E1---IOPB7
;E2---IOPB4
;写指令代码子程序（E1）
 
;                7654321076543210
PR0:	LDP     #0E1H
	NOP
	SPLK	#01011100000001000B,PBDATDIR	;R/W=1
	NOP
	NOP
	NOP
PR01:	LDP	#0
	NOP
	SPLK    #0FFFFH,OUTDATA			
	NOP
	OUT	OUTDATA,8000H
	NOP
	NOP
	NOP
	NOP
	NOP
	NOP
	NOP
	NOP
	NOP
	LDP	#0E1H
	NOP
	NOP
	NOP
	NOP
	NOP
	SPLK	#01011100000000000B,PBDATDIR	;R/W=0
	NOP
	NOP
	NOP
	LDP	#0
	NOP
        NOP
        OUT     SHOWCOM,8000H
	NOP
	LDP	#0E1H
	SPLK	#01011100010000000B,PBDATDIR	;E1=1
	NOP
	NOP
	NOP
	SPLK	#01011100000000000B,PBDATDIR	;E1=0
	NOP
	NOP
	NOP
	LDP	#0
	RET

;写显示数据子程序（E1）

	 
;                7654321076543210
PR1:	LDP     #0E1H
	NOP
	SPLK	#01011100000001000B,PBDATDIR	;R/W=1
	NOP
	NOP
	NOP
PR11:	LDP	#0
	SPLK    #0FFFFH,OUTDATA			
	NOP
	OUT	OUTDATA,8000H
	NOP
	NOP
	NOP
	NOP
	NOP
	NOP
	NOP
	NOP
	NOP
	NOP
	NOP
	LDP	#0E1H
	NOP
	NOP
	NOP
	NOP
	NOP
 	SPLK	#01011100000101000B,PBDATDIR	;A0=1
	NOP
	NOP
	SPLK	#01011100000100000B,PBDATDIR	;R/W=0,A0=1
	NOP
	NOP
	NOP
	LDP	#0
	NOP
        NOP
        OUT     SHOWDAT,8000H
	NOP
	LDP	#0E1H
	SPLK	#01011100010100000B,PBDATDIR	;E1=1
	NOP
	NOP
	NOP
	SPLK	#01011100000100000B,PBDATDIR	;E1=0
	NOP
	NOP
	NOP
	LDP	#0
	RET

;写指令代码子程序（E2）

;                7654321076543210
PR3:	LDP     #0E1H
	NOP
	SPLK	#01011100000001000B,PBDATDIR	;R/W=1
	NOP
	NOP
	NOP
PR31:	LDP	#0
	SPLK    #0FFFFH,OUTDATA			
	NOP
	OUT	OUTDATA,8000H
	NOP
	NOP
	NOP
	NOP
	NOP
	NOP
	NOP
	NOP
	NOP
	NOP
	NOP
	LDP	#0E1H
	NOP
	NOP
	NOP
	NOP
	NOP
	SPLK	#01011100000000000B,PBDATDIR	;R/W=0
	NOP
	NOP
	NOP
	LDP	#0
	NOP
	NOP
        OUT     SHOWCOM,8000H
	NOP
	LDP	#0E1H
	SPLK	#01011100000010000B,PBDATDIR	;E2=1
	NOP
	NOP
	NOP
	SPLK	#01011100000000000B,PBDATDIR	;E2=0
	NOP
	NOP
	LDP	#0
	NOP
	RET

;写显示数据子程序（E2）

	 
;                7654321076543210
PR4:	LDP     #0E1H
	NOP
	SPLK	#01011100000001000B,PBDATDIR	;R/W=1
	NOP
	NOP
	NOP
PR41:	LDP	#0
	SPLK    #0FFFFH,OUTDATA			
	NOP
	OUT	OUTDATA,8000H
	NOP
	NOP
	NOP
	NOP
	NOP
	NOP
	NOP
	NOP
	NOP
	NOP
	NOP
	LDP	#0E1H
	NOP
	NOP
	NOP
	NOP
	NOP
	NOP
 	SPLK	#01011100000101000B,PBDATDIR	;A0=1
	NOP
	NOP
	SPLK	#01011100000100000B,PBDATDIR	;R/W=0,A0=1
	NOP
	NOP
	NOP
	LDP	#0
	NOP
        NOP
        OUT     SHOWDAT,8000H
	NOP
	LDP	#0E1H
	SPLK	#01011100000110000B,PBDATDIR	;E2=1
	NOP
	NOP
	NOP
	SPLK	#01011100000100000B,PBDATDIR	;E2=0
	NOP
	NOP
	NOP
	LDP	#0
	RET

;show "IN  CUR        A"
;SHOW "IN  VOL        V"      
;SHOW "OUT CUR        A"
;SHOW "OUT VOL        V"
;SHOW POISITION  04 0C 14 1C 24 2C  34  3C  44 4C 54 5C
;can show 12*8 letter a line
;show poisition  04 0A 10 16 1C 22  28  2E  34 
;3A 40 46 4C  52  58  5E
;CAN show 16*6 letter a line
E_SHOW:	LDP	#0		; IN
	SPLK	#0,PAGE
	SPLK	#04H,COLUMN
	SPLK	#15H,CODE
	CALL	CW_PR

	LDP	#0		
	SPLK	#0,PAGE
	SPLK	#0AH,COLUMN
	SPLK	#1AH,CODE
	CALL	CW_PR

	LDP	#0		; 2*BLANK
	SPLK	#0,PAGE
	SPLK	#10H,COLUMN
	SPLK	#01H,CODE
	CALL	CW_PR

	LDP	#0		
	SPLK	#0,PAGE
	SPLK	#16H,COLUMN
	SPLK	#01H,CODE
	CALL	CW_PR

	LDP	#0		; CUR
	SPLK	#0,PAGE
	SPLK	#1CH,COLUMN
	SPLK	#0FH,CODE
	CALL	CW_PR

	LDP	#0		
	SPLK	#0,PAGE
	SPLK	#22H,COLUMN
	SPLK	#21H,CODE
	CALL	CW_PR

	LDP	#0		
	SPLK	#0,PAGE
	SPLK	#28H,COLUMN
	SPLK	#1EH,CODE
	CALL	CW_PR

	LDP	#0		;A
	SPLK	#0,PAGE
	SPLK	#5EH,COLUMN
	SPLK	#0DH,CODE
	CALL	CW_PR

	LDP	#0		; IN
	SPLK	#1,PAGE
	SPLK	#04H,COLUMN
	SPLK	#15H,CODE
	CALL	CW_PR

	LDP	#0		
	SPLK	#1,PAGE
	SPLK	#0AH,COLUMN
	SPLK	#1AH,CODE
	CALL	CW_PR

	LDP	#0		; 2*BLANK
	SPLK	#1,PAGE
	SPLK	#10H,COLUMN
	SPLK	#01H,CODE
	CALL	CW_PR

	LDP	#0		
	SPLK	#1,PAGE
	SPLK	#16H,COLUMN
	SPLK	#01H,CODE
	CALL	CW_PR

	LDP	#0		; VOL
	SPLK	#1,PAGE
	SPLK	#1CH,COLUMN
	SPLK	#22H,CODE
	CALL	CW_PR

	LDP	#0		
	SPLK	#1,PAGE
	SPLK	#22H,COLUMN
	SPLK	#1BH,CODE
	CALL	CW_PR

	LDP	#0		
	SPLK	#1,PAGE
	SPLK	#28H,COLUMN
	SPLK	#18H,CODE
	CALL	CW_PR

	LDP	#0		;V
	SPLK	#1,PAGE
	SPLK	#5EH,COLUMN
	SPLK	#22H,CODE
	CALL	CW_PR
	
	LDP	#0		; OUT
	SPLK	#2,PAGE
	SPLK	#04H,COLUMN
	SPLK	#1BH,CODE
	CALL	CW_PR

	LDP	#0		
	SPLK	#2,PAGE
	SPLK	#0AH,COLUMN
	SPLK	#21H,CODE
	CALL	CW_PR

	LDP	#0		
	SPLK	#2,PAGE
	SPLK	#10H,COLUMN
	SPLK	#20H,CODE
	CALL	CW_PR

	LDP	#0		; CUR
	SPLK	#2,PAGE
	SPLK	#1CH,COLUMN
	SPLK	#0FH,CODE
	CALL	CW_PR

	LDP	#0		
	SPLK	#2,PAGE
	SPLK	#22H,COLUMN
	SPLK	#21H,CODE
	CALL	CW_PR

	LDP	#0		
	SPLK	#2,PAGE
	SPLK	#28H,COLUMN
	SPLK	#1EH,CODE
	CALL	CW_PR

	LDP	#0		;A
	SPLK	#2,PAGE
	SPLK	#5EH,COLUMN
	SPLK	#0DH,CODE
	CALL	CW_PR

	LDP	#0		; OUT
	SPLK	#3,PAGE
	SPLK	#04H,COLUMN
	SPLK	#1BH,CODE
	CALL	CW_PR

	LDP	#0		
	SPLK	#3,PAGE
	SPLK	#0AH,COLUMN
	SPLK	#21H,CODE
	CALL	CW_PR

	LDP	#0		
	SPLK	#3,PAGE
	SPLK	#10H,COLUMN
	SPLK	#20H,CODE
	CALL	CW_PR

	LDP	#0		; VOL
	SPLK	#3,PAGE
	SPLK	#1CH,COLUMN
	SPLK	#22H,CODE
	CALL	CW_PR

	LDP	#0		
	SPLK	#3,PAGE
	SPLK	#22H,COLUMN
	SPLK	#1BH,CODE
	CALL	CW_PR

	LDP	#0		
	SPLK	#3,PAGE
	SPLK	#28H,COLUMN
	SPLK	#18H,CODE
	CALL	CW_PR

	LDP	#0		;V
	SPLK	#3,PAGE
	SPLK	#5EH,COLUMN
	SPLK	#22H,CODE
	CALL	CW_PR

	RET